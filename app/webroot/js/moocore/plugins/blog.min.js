(function(a,b){"function"===typeof define&&define.amd?define("jquery mooFileUploader mooBehavior mooAlert mooPhrase mooUser mooOverlay mooGlobal tinyMCE".split(" "),b):"object"===typeof exports?module.exports=b(require("jquery")):a.mooBlog=b()})(this,function(a,b,h,m,e,k,n,l,f){var g=function(){a(".deleteBlog").unbind("click");a(".deleteBlog").click(function(){var c=a(this).data(),c=mooConfig.url.base+"/blogs/delete/"+c.id;m.confirm(e.__("are_you_sure_you_want_to_remove_this_entry"),c)})};return{initOnCreate:function(){var c=
new b.fineUploader({element:a("#photos_upload")[0],autoUpload:!1,text:{uploadButton:'<div class="upload-section"><i class="material-icons">photo_camera</i>'+e.__("drag_or_click_here_to_upload_photo")+"</div>"},validation:{allowedExtensions:mooConfig.photoExt,sizeLimit:mooConfig.sizeLimit},request:{endpoint:mooConfig.url.base+"/blog/blog_upload/images"},callbacks:{onError:l.errorHandler,onComplete:function(c,b,d){a("#blog_photo_ids").val(a("#blog_photo_ids").val()+","+d.photo_id);f.activeEditor.insertContent('<p align="center"><a href="'+
d.large+'" class="attached-image"><img src="'+d.thumb+'"></a></p><br>')}}});a("#triggerUpload").unbind("click");a("#triggerUpload").click(function(){c.uploadStoredFiles()});a("#saveBtn").unbind("click");a("#saveBtn").click(function(){a(this).addClass("disabled");null!==f.activeEditor&&a("#editor").val(f.activeEditor.getContent());h.createItem("blogs",!0)});new b.fineUploader({element:a("#blog_thumnail")[0],multiple:!1,text:{uploadButton:'<div class="upload-section"><i class="material-icons">photo_camera</i>'+
e.__("drag_or_click_here_to_upload_photo")+"</div>"},validation:{allowedExtensions:mooConfig.photoExt,sizeLimit:mooConfig.sizeLimit},request:{endpoint:mooConfig.url.base+"/blog/blog_upload/avatar"},callbacks:{onError:l.errorHandler,onComplete:function(c,b,d){a("#blog_thumnail_preview > img").attr("src",d.thumb);a("#blog_thumnail_preview > img").show();a("#thumbnail").val(d.file)}}});g();a("#toggleUploader").unbind("click");a("#toggleUploader").on("click",function(){a("#images-uploader").slideToggle()})},
initOnView:function(){n.registerImageOverlay();g();k.initRespondRequest()},initOnEdit:function(){},initOnListing:function(){h.initMoreResults();g();a(".likeItem").unbind("click");a(".likeItem").click(function(){var c=a(this),b=a(this).data(),e=b.status;a.post(mooConfig.url.base+"/likes/ajax_add/"+b.type+"/"+b.id+"/"+e,{noCache:1},function(b){try{var d=a.parseJSON(b);c.parents(".like-section:first").find(".likeCount:first").html(parseInt(d.like_count));c.parents(".like-section:first").find(".dislikeCount:first").html(parseInt(d.dislike_count));
e?(c.toggleClass("active"),c.next().next().removeClass("active")):(c.toggleClass("active"),c.prev().prev().removeClass("active"))}catch(p){k.validateUser()}})})}}});